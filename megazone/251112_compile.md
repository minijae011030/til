# 251112

## 소프트웨어 개발의 주요 단계

소프트웨어 개발 과정은 다음과 같은 주요 단계를 거친다.

1. **코딩(Coding)**: 개발자가 C#, Java, Python, JavaScript 등과 같은 고급 프로그래밍 언어를 사용하여 프로그램의 소스를 작성하는 단계이다.
2. **컴파일(Compile)**: 작성된 소스코드를 컴파일러가 기계어 코드로 변환하는 단계이다. 이 과정에서 코드 구문과 의미 오류가 검사된다.
3. **실행(Execution)**: 컴파일 된 프로그램이 실제 실행되는 단계로, 프로그램이 런타임 환경에서 동작하며, 예상치 못한 오류가 발생할 수 있다.

## Compile Time, Run Time

우리가 고급 언어로 작성된 소스코드를 입력할 때 이 코드를 CPU에서 실행할 수 있는 **전자적 작용**의 연속으로 변환해야 한다. 이 단계가 바로 컴파일이다.

컴파일 타임의 에러는 이 컴파일 단계에서 발생하며, 런타임 에러는 프로그램이 실행되는 이후 발생한다.

소스코드가 오류 없이 컴파일 되었다고 해서 프로그램이 오류 없이 실행될 것이라는 보장은 없다. 런타임 오류는 프로그램의 라이프사이클 실행 단계 이후에 발생하는 반면, 컴파일 타임 오류는 프로그램이 실행되기 전, 즉 준비 단계에서 발생한다.

## JavaScript 런타임

자바스크립트가 실행되는 환경을 의미하며, 대표적인 JS 런타임으로는 인터넷 브라우저와 Node.js 등이 있다.

## TypeScript 컴파일

타입스크립트는 tsc 컴파일러를 통해 자바스크립트 코드로 변환된다.

- TS는 고수준 언어가 고수준언어(JS)로 변환되는 것이기에, 트랜스파일이라고도 부른다.
- 이 과정은 소스코드를 다른 소스코드로 변환하는 것이기에 타입스크립트 컴파일러를 `source-to-source compiler`라고 지칭하기도 한다.

TS는 .ts 확장자가 붙은 파일을 찾아내 컴파일한 다음, .js 확장자가 붙은 JS 파일을 만들어낸다.

- TS 컴파일러는 소스코드를 해석해 추상 구문 트리(AST)를 만든다.
- 타입 확인을 거친 후 결과 코드를 생성한다.

### AST (Abstract Syntax Tree, 추상 구문 트리)

컴파일러에 대한 내용을 읽다보면 구분분석(파서)의 결과의 예시로 AST 라는 것이 있다.
![image](https://velog.velcdn.com/images/hbsps/post/b1d5d478-6d0b-43ee-a65d-b1eb082071b4/image.png)

위와 같은 트리의 혀앹를 추상 구문 트리라고 부른다.

각 언어로 프로그래밍 된 소스코드는 추상적으로 바뀌게 되고, 코드의 구조는 위와 같이 노드로 바뀌게 된다.

### AST 응용

AST는 다양한 방법으로 응용할 수 있다.

#### eslint

가장 대표적으로 AST를 활용하는 라이브러리는 eslint가 있다.

eslint는 파서를 이용해 소스코드를 AST로 변환하고 이를 바탕으로 정적 분석을 수행해준다.

eslint가 소스코드에 AST를 활용하는 이유를 생각해보자.

```typescript
const test = "this is test";
// const test = 'this is test';
```

두 코드의 내용은 같지만, AST로 변환하면 서로 다른 객체가 된다.

eslint가 단순히 파일의 내용을 텍스트로 가져와서 문자열을 확인한다거나, 추상화되지 않은 문자들을 가지고 분석한다면 두 코드의 차이를 구분하지 못할 것이다.

여기서 AST를 활용하게 된다면 소스코드를 토큰으로 나눈 뒤 추상화된 트리를 만들게 될 것이고, 소스코드에서 각 문자열이 어떤 역할을 하는지 알 수 있게 된다.

## TS 컴파일러가 소스코드를 컴파일하여 프로그램이 실행되기까지의 과정

1. 타입스크립트 소스코드를 타입스크립트 AST로 만든다. (tsc)
2. 타입 검사가 AST를 확인하여 타입을 확인한다. (tsc)
3. 타입스크립트 AST를 자바스크립트 소스로 변환한다. (tsc)
4. 나바스크립트 소스코드를 자바스크립트 AST로 만든다. (런타임)
5. AST가 바이트 코드로 변환된다. (런타임)
6. 런타임에서 바이트 코드가 병가되어 프로그램이 실행된다. (런타임)

이때 TS의 소스코드 타입은 1~1단계에서만 사용되고 3단계부터는 타입을 확인하지 않는다.

- 개발자가 작성한 타입 정보는 결과 프로그램에 아무런 영향을 끼치지 않는다.
- 따라서 TS의 존재 이유는 타입 확인이며, 컴파일타임에 에러를 발견할 수 있는 장점이 있다.
